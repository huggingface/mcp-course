# MCP 的架构组件

在上一节中，我们讨论了 MCP 的核心概念和术语。现在让我们深入探讨构成 MCP 生态系统的架构组件。

## Host、Client 和 Server

模型上下文协议（Model Context Protocol，MCP）基于客户端-服务端架构构建，实现 AI 模型与外部系统的结构化通信。

![MCP 架构示意图](https://huggingface.co/datasets/mcp-course/images/resolve/main/unit1/4.png)

MCP 架构包含三个主要组件，每个组件都有明确的职责划分：

### Host（宿主）

**Host** 是直接面向用户的 AI 应用程序。典型示例包括：
- AI 聊天应用（如 OpenAI ChatGPT 或 Anthropic 的 Claude Desktop）
- 增强型 IDE（如 Cursor）或工具集成（如 Continue.dev）
- 使用 LangChain 或 smolagents 构建的自定义智能体

Host 的核心职责：
- 管理用户交互与权限控制
- 通过 MCP Client 建立与 Server 的连接
- 协调用户请求、LLM 处理与外部工具的整体流程
- 以可理解格式呈现结果

开发者可能选择 Cursor 作为开发工具，而领域专家可能使用 smolagents 构建定制应用。

### Client（客户端）

**Client** 是 Host 应用中负责与特定 Server 通信的组件，特点包括：
- 与单个 Server 保持 1:1 连接
- 处理 MCP 协议层通信细节
- 作为 Host 逻辑与外部 Server 的中介

### Server（服务端）

**Server** 是通过 MCP 协议对外提供能力的程序/服务，特点包括：
- 封装特定外部工具、数据源或服务
- 可作为现有功能的轻量级封装层
- 支持本地或远程部署
- 以标准化格式暴露可发现的能力

## 通信流程

典型 MCP 工作流包含以下步骤：

<Tip>
下一节将通过实际案例深入解析通信协议细节
</Tip>

1. **用户交互**：用户与 Host 应用进行交互
2. **请求处理**：Host 解析用户输入（可能使用 LLM）
3. **建立连接**：Host 指示 Client 连接目标 Server
4. **能力发现**：Client 查询 Server 可用能力（工具/资源/提示词）
5. **调用能力**：根据需求调用 Server 特定能力
6. **执行返回**：Server 执行操作并返回结果
7. **结果整合**：Client 将结果传回 Host 进行后续处理

架构优势在于模块化设计：
- 单个 Host 可通过多个 Client 连接不同 Server
- 新增 Server 无需修改现有 Host
- 跨 Server 能力可自由组合

<Tip>
这种设计将传统的 M×N 集成问题转化为 M+N 问题，各组件只需实现一次 MCP 标准
</Tip>

## 架构优势

该架构的核心价值在于：
- **协议标准化**：统一通信规范
- **职责分离**：明确组件边界
- **生态扩展性**：支持无缝接入新工具和数据源

## 设计原则

MCP 遵循以下核心原则：
- **标准化**：提供通用 AI 连接协议
- **简洁性**：保持核心协议简单直观
- **安全性**：敏感操作需显式用户授权
- **可发现性**：支持动态能力探测
- **可扩展性**：通过版本协商支持演进
- **互操作性**：确保跨实现环境的兼容性

下一节我们将深入解析实现这些组件协作的通信协议细节。