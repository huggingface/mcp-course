# Gradio MCP é›†æˆ

æˆ‘ä»¬å·²ç»æ¢ç´¢äº† MCP åè®®çš„æ ¸å¿ƒæ¦‚å¿µåŠå¦‚ä½•å®ç° MCP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯ã€‚æœ¬èŠ‚æˆ‘ä»¬å°†ä½¿ç”¨ Gradio ç®€åŒ– MCP æœåŠ¡å™¨çš„åˆ›å»ºï¼

<Tip>

Gradio æ˜¯æµè¡Œçš„ Python åº“ï¼Œå¯å¿«é€Ÿä¸ºæœºå™¨å­¦ä¹ æ¨¡å‹åˆ›å»ºå¯å®šåˆ¶ Web ç•Œé¢ã€‚

</Tip>

## Gradio ç®€ä»‹

Gradio å…è®¸å¼€å‘è€…ç”¨å‡ è¡Œ Python ä»£ç ä¸ºæ¨¡å‹åˆ›å»º UIï¼Œç‰¹åˆ«é€‚ç”¨äºï¼š
- åˆ›å»ºæ¼”ç¤ºå’ŒåŸå‹
- ä¸éæŠ€æœ¯ç”¨æˆ·å…±äº«æ¨¡å‹
- æµ‹è¯•å’Œè°ƒè¯•æ¨¡å‹è¡Œä¸º

é€šè¿‡æ–°å¢çš„ MCP æ”¯æŒï¼ŒGradio ç°åœ¨èƒ½å¤Ÿé€šè¿‡æ ‡å‡†åŒ– MCP åè®®æš´éœ² AI æ¨¡å‹èƒ½åŠ›ã€‚

Gradio ä¸ MCP çš„ç»“åˆè®©ä½ èƒ½ç”¨æœ€å°‘ä»£ç åŒæ—¶åˆ›å»ºäººæ€§åŒ–ç•Œé¢å’Œ AI å¯è®¿é—®å·¥å…·ã€‚æœ€é‡è¦çš„æ˜¯ï¼ŒGradio å·²è¢« AI ç¤¾åŒºå¹¿æ³›ä½¿ç”¨ï¼Œä¾¿äºåˆ†äº«ä½ çš„ MCP æœåŠ¡å™¨ã€‚

## å‰ææ¡ä»¶

ä½¿ç”¨ Gradio çš„ MCP æ”¯æŒéœ€è¦å®‰è£…é¢å¤–ä¾èµ–ï¼š
```bash
pip install "gradio[mcp]"
```

åŒæ—¶éœ€è¦æ”¯æŒ MCP åè®®å·¥å…·è°ƒç”¨çš„ LLM åº”ç”¨ï¼Œä¾‹å¦‚ Cursorï¼ˆå³ "MCP Hosts"ï¼‰ã€‚

## ä½¿ç”¨ Gradio åˆ›å»º MCP æœåŠ¡å™¨

ä»¥ä¸‹æ˜¯é€šè¿‡ Gradio åˆ›å»º MCP æœåŠ¡å™¨çš„åŸºç¡€ç¤ºä¾‹ï¼š

```python
import gradio as gr

def letter_counter(word: str, letter: str) -> int:
    """
    Count the number of occurrences of a letter in a word or text.

    Args:
        word (str): The input text to search through
        letter (str): The letter to search for

    Returns:
        int: The number of times the letter appears in the text
    """
    word = word.lower()
    letter = letter.lower()
    count = word.count(letter)
    return count

# Create a standard Gradio interface
demo = gr.Interface(
    fn=letter_counter,
    inputs=["textbox", "textbox"],
    outputs="number",
    title="Letter Counter",
    description="Enter text and a letter to count how many times the letter appears in the text."
)

# Launch both the Gradio web interface and the MCP server
if __name__ == "__main__":
    demo.launch(mcp_server=True)
```

é€šè¿‡è¿™ç§è®¾ç½®ï¼Œä½ çš„å­—æ¯è®¡æ•°åŠŸèƒ½ç°åœ¨å¯ä»¥é€šè¿‡ä»¥ä¸‹ä¸¤ç§æ–¹å¼è®¿é—®ï¼š

1. ä¼ ç»Ÿçš„ Gradio ç½‘é¡µç•Œé¢ï¼Œä¾›ç”¨æˆ·ç›´æ¥äº¤äº’
2. å¯è¿æ¥å…¼å®¹å®¢æˆ·ç«¯çš„ MCP æœåŠ¡å™¨

MCP æœåŠ¡å™¨å¯é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
```
http://your-server:port/gradio_api/mcp/sse
```

åº”ç”¨æœ¬èº«ä»ç„¶ä¿æŒå¯è®¿é—®ï¼Œç•Œé¢å¦‚ä¸‹æ‰€ç¤ºï¼š

![Gradio MCP Server](https://huggingface.co/datasets/mcp-course/images/resolve/main/unit1/7.png)

## å¹•åå·¥ä½œåŸç†

å½“ä½ åœ¨ `launch()` ä¸­è®¾ç½® `mcp_server=True` æ—¶ï¼Œä¼šå‘ç”Ÿä»¥ä¸‹å˜åŒ–ï¼š

1. Gradio å‡½æ•°ä¼šè‡ªåŠ¨è½¬æ¢ä¸º MCP å·¥å…·
2. è¾“å…¥ç»„ä»¶æ˜ å°„åˆ°å·¥å…·å‚æ•°æ¨¡å¼
3. è¾“å‡ºç»„ä»¶å†³å®šå“åº”æ ¼å¼
4. Gradio æœåŠ¡å™¨ç°åœ¨åŒæ—¶ç›‘å¬ MCP åè®®æ¶ˆæ¯
5. å»ºç«‹åŸºäº HTTP+SSE çš„ JSON-RPC åè®®ç”¨äºå®¢æˆ·ç«¯-æœåŠ¡å™¨é€šä¿¡

## Gradio <> MCP é›†æˆçš„å…³é”®ç‰¹æ€§

1. **å·¥å…·è½¬æ¢**ï¼šä½ çš„ Gradio åº”ç”¨ä¸­çš„æ¯ä¸ª API ç«¯ç‚¹éƒ½ä¼šè‡ªåŠ¨è½¬æ¢ä¸ºå…·æœ‰å¯¹åº”åç§°ã€æè¿°å’Œè¾“å…¥æ¨¡å¼çš„ MCP å·¥å…·ã€‚è¦æŸ¥çœ‹å·¥å…·å’Œæ¨¡å¼ï¼Œè¯·è®¿é—® `http://your-server:port/gradio_api/mcp/schema` æˆ–ç‚¹å‡» Gradio åº”ç”¨é¡µè„šçš„ "View API" é“¾æ¥ï¼Œç„¶åé€‰æ‹© "MCP"ã€‚

2. **ç¯å¢ƒå˜é‡æ”¯æŒ**ï¼šæœ‰ä¸¤ç§æ–¹å¼å¯ä»¥å¯ç”¨ MCP æœåŠ¡å™¨åŠŸèƒ½ï¼š
- åœ¨ `launch()` ä¸­ä½¿ç”¨ `mcp_server` å‚æ•°ï¼š
  ```python
  demo.launch(mcp_server=True)
  ```
- Using environment variables:
  ```bash
  export GRADIO_MCP_SERVER=True
  ```

3. **æ–‡ä»¶å¤„ç†**ï¼šæœåŠ¡å™¨ä¼šè‡ªåŠ¨å¤„ç†æ–‡ä»¶æ•°æ®è½¬æ¢ï¼ŒåŒ…æ‹¬ï¼š
   - å°† base64 ç¼–ç å­—ç¬¦ä¸²è½¬æ¢ä¸ºæ–‡ä»¶æ•°æ®
   - å¤„ç†å›¾åƒæ–‡ä»¶å¹¶ä»¥æ­£ç¡®æ ¼å¼è¿”å›
   - ç®¡ç†ä¸´æ—¶æ–‡ä»¶å­˜å‚¨

   **å¼ºçƒˆ** å»ºè®®è¾“å…¥å›¾åƒå’Œæ–‡ä»¶ä½¿ç”¨å®Œæ•´ URLï¼ˆ"http://..." æˆ– "https://..."ï¼‰ä¼ é€’ï¼Œå› ä¸º MCP å®¢æˆ·ç«¯å¹¶ä¸æ€»æ˜¯èƒ½æ­£ç¡®å¤„ç†æœ¬åœ°æ–‡ä»¶ã€‚

4. **åœ¨ ğŸ¤— Spaces ä¸Šæ‰˜ç®¡ MCP æœåŠ¡å™¨**ï¼šä½ å¯ä»¥å°† Gradio åº”ç”¨å…è´¹å‘å¸ƒåˆ° Hugging Face Spacesï¼Œä»è€Œè·å¾—å…è´¹çš„æ‰˜ç®¡ MCP æœåŠ¡å™¨ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ Spaceï¼šhttps://huggingface.co/spaces/abidlabs/mcp-tools

## æ•…éšœæ’é™¤æç¤º

1. **ç±»å‹æç¤ºä¸æ–‡æ¡£å­—ç¬¦ä¸²**ï¼šç¡®ä¿ä¸ºå‡½æ•°æä¾›ç±»å‹æç¤ºå’Œæœ‰æ•ˆçš„æ–‡æ¡£å­—ç¬¦ä¸²ã€‚æ–‡æ¡£å­—ç¬¦ä¸²åº”åŒ…å«å¸¦ç¼©è¿›å‚æ•°åçš„ "Args:" ä»£ç å—ã€‚

2. **å­—ç¬¦ä¸²è¾“å…¥**ï¼šå½“ä¸ç¡®å®šæ—¶ï¼Œè¯·å°†è¾“å…¥å‚æ•°æ¥å—ä¸º [str](file://e:\githubProjects\nacos\naming\src\test\java\com\alibaba\nacos\naming\consistency\persistent\impl\NamingKvStorageTest.java#L45-L45) ç±»å‹ï¼Œå¹¶åœ¨å‡½æ•°å†…éƒ¨å°†å…¶è½¬æ¢ä¸ºæ‰€éœ€ç±»å‹ã€‚

3. **SSE æ”¯æŒ**ï¼šéƒ¨åˆ† MCP Hosts ä¸æ”¯æŒåŸºäº SSE çš„ MCP æœåŠ¡å™¨ã€‚è¿™ç§æƒ…å†µä¸‹å¯ä»¥ä½¿ç”¨ `mcp-remote`ï¼š
   ```json
   {
     "mcpServers": {
       "gradio": {
         "command": "npx",
         "args": [
           "mcp-remote",
           "http://your-server:port/gradio_api/mcp/sse"
         ]
       }
     }
   }
   ```

4. **é‡å¯å»ºè®®**ï¼šå¦‚æœé‡åˆ°è¿æ¥é—®é¢˜ï¼Œè¯·å°è¯•åŒæ—¶é‡å¯ä½ çš„ MCP å®¢æˆ·ç«¯å’Œ MCP æœåŠ¡å™¨ã€‚

## åˆ†äº«ä½ çš„ MCP æœåŠ¡å™¨

ä½ å¯ä»¥é€šè¿‡å°† Gradio åº”ç”¨å‘å¸ƒåˆ° Hugging Face Spaces æ¥åˆ†äº« MCP æœåŠ¡å™¨ã€‚ä»¥ä¸‹è§†é¢‘æ¼”ç¤ºäº†å¦‚ä½•åˆ›å»º Hugging Face Spaceï¼š

<Youtube id="3bSVKNKb_PY" />

ç°åœ¨ï¼Œä½ å¯ä»¥é€šè¿‡åˆ†äº«ä½ çš„ Hugging Face Space æ¥ä¸ä»–äººå…±äº« MCP æœåŠ¡å™¨ã€‚

## ç»“è®º

Gradio ä¸ MCP çš„é›†æˆä¸º MCP ç”Ÿæ€ç³»ç»Ÿæä¾›äº†ä¾¿æ·çš„å…¥å£ã€‚é€šè¿‡ç»“åˆ Gradio çš„ç®€æ˜“æ€§å’Œ MCP çš„æ ‡å‡†åŒ–ï¼Œå¼€å‘è€…å¯ä»¥ç”¨æœ€å°‘ä»£ç å¿«é€Ÿåˆ›å»ºäººæ€§åŒ–ç•Œé¢å’Œ AI å¯è®¿é—®å·¥å…·ã€‚

éšç€è¯¾ç¨‹æ·±å…¥ï¼Œæˆ‘ä»¬å°†æ¢ç´¢æ›´å¤æ‚çš„ MCP å®ç°æ–¹æ¡ˆï¼Œä½† Gradio ä¸ºåè®®çš„ç†è§£å’Œå®éªŒæä¾›äº†ç»ä½³çš„èµ·ç‚¹ã€‚

ä¸‹ä¸€å•å…ƒæˆ‘ä»¬å°†æ·±å…¥æ¢è®¨ MCP åº”ç”¨å¼€å‘ï¼Œé‡ç‚¹åŒ…æ‹¬ï¼š
- å¼€å‘ç¯å¢ƒæ­å»º
- SDK æ¢ç´¢
- é«˜çº§ MCP æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„å®ç°